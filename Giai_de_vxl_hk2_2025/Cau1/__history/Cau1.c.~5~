#include <16f887.h>
#fuses intrc_io
#use delay(clock=8M)

#define SW pin_e0
#define BT pin_b7
#define L1 pin_c0


void main()
{
   set_tris_c(0);
   set_tris_b(0xff);
   set_tris_e(0xff);
   
   output_low(L1);
   
   while(true)
   {
      if(input(SW) == 1)    output_low(L1);
      else if(input(SW) == 0)
      {
         if(input(BT) == 0)
         {
            delay_ms(20);
            if(input(BT) == 0)
            {
               do
               {
                  output_toggle(L1);
                  delay_ms(100);
               }while(input(SW) == 1);
            }
         }
      }
   }
}
